<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Campus CafÃ© | Quote Dashboard</title>

    <style>
      :root {
        /* Complete the color palette (change values only) */
        --bg: #f0debb;
        --panel: #fff;
        --text: #0f172a;
        --muted: #64748b;
        --border: rgba(0, 0, 0, 0.1);
        --accent: #d26946;
        --radius: 16px;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family:
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Arial,
          sans-serif;
        background: var(--bg);
        color: var(--text);
      }

      a {
        color: var(--accent);
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 16px;
        display: grid;
        grid-template-columns: repeat(12, 1fr);
        gap: 16px;
      }

      .panel {
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 16px;
      }

      .container > * {
        grid-column: 1 / -1;
      }

      @media (min-width: 768px) {
        .head {
          grid-column: span 12;
        }
        .nav {
          grid-column: 1 / 3;
        }
        .content {
          grid-column: 3 / 10;
        }
        .sidebar {
          grid-column: 10 / 13;
          grid-row: 2;
        }
        .ads {
          grid-column: 10 / 13;
          grid-row: 3;
        }
        .footer {
          grid-column: span 12;
        }
      }

      .head img {
        width: 100%;
        height: 220px;
        object-fit: cover;
        border-radius: 12px;
        border: 1px solid var(--border);
        display: block;
        margin-top: 10px;
      }

      .muted {
        color: var(--muted);
      }

      /* Complete nested menu grid here (mobile: 1 column) */
      .menu-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 16px;
      }

      /* Complete breakpoint for menu cards (desktop: 3 columns) */
      @media (min-width: 900px) {
        .menu-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 16px;
        }
      }

      article {
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 12px;
        background: #fff;
      }

      .price {
        font-weight: 900;
        color: var(--accent);
      }

      .actions {
        margin-top: 12px;
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      button {
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 10px 12px;
        font-weight: 800;
        cursor: pointer;
        background: #fff;
      }

      #calcBtn {
        background: var(--accent);
        color: #fff;
        border-color: rgba(0, 0, 0, 0.2);
      }

      pre {
        white-space: pre-wrap;
        background: rgba(15, 23, 42, 0.03);
        border: 1px dashed rgba(15, 23, 42, 0.15);
        padding: 12px;
        border-radius: 12px;
        margin: 10px 0 0 0;
        font-family:
          ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
      }

      .weather {
        background: rgba(22, 163, 74, 0.08);
        border: 1px solid rgba(22, 163, 74, 0.18);
        border-radius: 12px;
        padding: 12px;
        margin-top: 8px;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <header class="head panel">
        <h1>Campus CafÃ©</h1>
        <p class="muted">
          Quote Dashboard â€¢ Chapter 8 JavaScript + 12-column CSS Grid
        </p>

        <img
          src="images/nathan-dumlao-Y3AqmbmtLQI-unsplash.jpg"
          alt="3 esspresso metal filters filled with beans, grounds, or coffee"
          style="height: 370px"
        />
      </header>

      <nav class="nav panel">
        <h2>Sections</h2>
        <ul>
          <li><a href="#menu">Menu</a></li>
          <li><a href="#quote">Get Quote</a></li>
          <li><a href="#about">About</a></li>
        </ul>
      </nav>

      <main class="content panel">
        <section id="menu">
          <h2>Menu</h2>
          <p class="muted">
            Display cards only. Inputs are collected using dialogs.
          </p>

          <div class="menu-grid">
            <article>
              <h3>Coffee</h3>
              <p class="price">$3.25</p>
              <p>Freshly brewed coffee made from premium beans.</p>
            </article>
            <article>
              <h3>Sandwich</h3>
              <p class="price">$8.50</p>
              <p>Delicious sandwich with fresh ingredients.</p>
            </article>
            <article>
              <h3>Salad</h3>
              <p class="price">$7.25</p>
              <p>Fresh salad with a variety of vegetables.</p>
            </article>
          </div>
        </section>

        <section id="quote" style="margin-top: 18px">
          <h2>Get a Quote</h2>
          <p class="muted">Click Get Quote and enter values in dialogs.</p>

          <div class="actions">
            <button id="calcBtn" type="button">Get Quote</button>
            <button id="resetBtn" type="button">Reset</button>
          </div>
        </section>

        <section id="about">
          <h2>About</h2>
          <p>
            Campus CafÃ© is a local coffee shop that serves high-quality
            beverages and food items. We source our ingredients from local
            suppliers to ensure freshness and sustainability.
          </p>
        </section>
      </main>

      <aside class="sidebar panel">
        <h3>Receipt</h3>
        <pre id="display">No order data.</pre>
      </aside>

      <aside class="ads panel">
        <h3>Local Weather</h3>
        <div id="weatherBox" class="weather">Loading weather...</div>
      </aside>

      <footer class="footer panel">
        <p>&copy; 2026 Campus CafÃ©</p>
        <p class="muted">Weather data by Open-Meteo (CC BY 4.0).</p>
        <p class="muted">Attributted to Nathan Dumlao (Unsplash).</p>
      </footer>
    </div>

    <script>
      /* =========================================================
       JavaScript (Chapter 8)
       Complete the marked functions and the Get Quote logic.
       ========================================================= */

      const PRICES = { coffee: 3.25, sandwich: 8.5, salad: 7.25 };
      const TAX_RATE = 0.05;
      const STUDENT_RATE = 0.1;
      const ECO_FEE = 1.0;
      const BULK_QTY = 6;
      const BULK_OFF = 2.0;

      function money(n) {
        return `$${n.toFixed(2)}`;
      }

      /* Complete: return trimmed + lowercase string; handle cancel/empty safely; if raw is null, it should return an empty string to avoid errors on .trim() */
      function normalizeType(raw) {
        return raw ? raw.trim().toLowerCase() : "";
      }

      /* Complete: return true only for coffee, sandwich, salad */
      function isValidType(t) {
        return t === "coffee" || t === "sandwich" || t === "salad";
      }

      /* Complete: use a for loop to repeat an icon up to 10 times */
      function iconsFor(type, qty) {
        const map = { coffee: "â˜•", sandwich: "ðŸ¥ª", salad: "ðŸ¥—" };
        const icon = map[type] || "âœ…";
        const cap = Math.min(qty, 10);
        let line = "";
        //write the FOR loop that repeats icon cap times
        // for (...) { line += icon; }
        for (let i = 0; i < cap; i++) {
          line += icon;
        }
        return line;
      }

      /* Complete: implement full math rules; unitPrice line is provided */
      function processQuote(type, qty, isStudent, ecoCup) {
        const unitPrice = PRICES[type];
        const subtotal = unitPrice * qty;
        const studentDiscount = isStudent ? subtotal * STUDENT_RATE : 0;
        const ecoFee = type === "coffee" && ecoCup ? ECO_FEE : 0;
        const bulkDiscount = qty >= BULK_QTY ? BULK_OFF : 0;
        const taxableAmount =
          subtotal - studentDiscount + ecoFee - bulkDiscount;
        const tax = taxableAmount * TAX_RATE;
        const total = taxableAmount + tax;

        return {
          unitPrice,
          subtotal,
          studentDiscount,
          ecoFee,
          bulkDiscount,
          tax,
          total,
        };
      }

      function buildReceipt(type, qty, isStudent, ecoCup, calc) {
        const icons = iconsFor(type, qty);
        const studentText = isStudent ? "Yes" : "No";
        const ecoText = type === "coffee" ? (ecoCup ? "Yes" : "No") : "N/A";

        return `CAMPUS CAFÃ‰ RECEIPT
--------------------------------
Item:           ${type}
Unit price:     ${money(calc.unitPrice)}
Quantity:       ${qty}  ${icons}
Student disc.:  ${studentText}
Eco cup add-on: ${ecoText}

Subtotal:       ${money(calc.subtotal)}
Student -10%:   -${money(calc.studentDiscount)}
Eco cup fee:    ${money(calc.ecoFee)}
Bulk deal:      -${money(calc.bulkDiscount)}
Tax (5%):       ${money(calc.tax)}
--------------------------------
TOTAL:          ${money(calc.total)}
`;
      }

      /* Complete: show a clear error in #display */
      function showError(msg) {
        document.getElementById("display").textContent = msg;
      }

      /* Complete: reset #display to "No order data." */
      function resetUI() {
        document.getElementById("display").textContent = "No order data.";
      }

      async function loadWeather() {
        const box = document.getElementById("weatherBox");
        const url =
          "https://api.open-meteo.com/v1/forecast" +
          "?latitude=53.5461&longitude=-113.4938" +
          "&current=temperature_2m,wind_speed_10m" +
          "&timezone=America/Edmonton";

        try {
          const res = await fetch(url);
          const data = await res.json();
          const t = data.current.temperature_2m;
          const w = data.current.wind_speed_10m;
          box.textContent = `Edmonton: ${t}Â°C â€¢ Wind ${w} km/h`;
        } catch {
          box.textContent = "Weather unavailable.";
        }
      }

      function main() {
        loadWeather();
        resetUI();

        document.getElementById("calcBtn").addEventListener("click", () => {
          const type = normalizeType(
            prompt("Enter item type: coffee / sandwich / salad"),
          );
          const qty = Number(prompt("Enter quantity (1â€“10):"));

          if (!isValidType(type)) {
            showError("Item must be coffee, sandwich, or salad.");
            return;
          }

          if (!Number.isInteger(qty) || qty < 1 || qty > 10) {
            showError(
              "The inputted value is invalid. Please enter a number between 1 and 10.",
            );
            return;
          }

          const studentResponse = normalizeType(
            prompt("Are you a student? (yes/no)"),
          );

          if (studentResponse === "yes") {
            showError("Student discount applied");
            isStudent = true;
          } else if (studentResponse === "no") {
            showError("No student discount applied");
            isStudent = false;
          }

          const ecoCup =
            type === "coffee" ? confirm("Add reusable cup? (+$1.00)") : false;

          const calc = processQuote(type, qty, isStudent, ecoCup);
          document.getElementById("display").textContent = buildReceipt(
            type,
            qty,
            isStudent,
            ecoCup,
            calc,
          );
        });

        document.getElementById("resetBtn").addEventListener("click", () => {
          resetUI();
        });
      }

      main();
    </script>
  </body>
</html>
